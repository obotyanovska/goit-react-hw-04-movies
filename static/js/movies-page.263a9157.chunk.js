(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[5],{104:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return b}));var n=r(12),a=r(13),c=r(15),o=r(14),u=r(0),i=r(61),s=r(95),f=r.n(s),l=r(1),h=function(t){Object(c.a)(r,t);var e=Object(o.a)(r);function r(){var t;Object(n.a)(this,r);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).state={value:""},t.onInputChange=function(e){t.setState({value:e.currentTarget.value})},t.onHandleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.value),t.resetInput()},t.resetInput=function(){t.setState({value:""})},t}return Object(a.a)(r,[{key:"render",value:function(){var t=this.state.value;return Object(l.jsx)("div",{className:f.a.SearchBar,children:Object(l.jsxs)("form",{className:f.a.SearchForm,onSubmit:this.onHandleSubmit,children:[Object(l.jsx)("input",{type:"text",value:t,autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:this.onInputChange}),Object(l.jsx)("button",{type:"submit",className:f.a.SearchForm__btn,children:"Search"})]})})}}]),r}(u.Component),p=r(20),v=(r(96),Object(u.lazy)((function(){return r.e(4).then(r.bind(null,75))}))),b=function(t){Object(c.a)(r,t);var e=Object(o.a)(r);function r(){var t;Object(n.a)(this,r);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).state={movies:[],searchQuery:null},t.fetchMovies=function(){var e=t.state.searchQuery;Object(i.b)(e).then((function(e){return t.setState({movies:e})})).catch((function(t){return console.log(t)}))},t.onSubmit=function(e){t.setState({searchQuery:e})},t}return Object(a.a)(r,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("searchQuery"),e=JSON.parse(t);e&&this.setState({searchQuery:e})}},{key:"componentDidUpdate",value:function(t,e){var r=e.searchQuery,n=this.state.searchQuery;r!==n&&(this.props.history.push({search:"query=".concat(n)}),this.fetchMovies(),localStorage.setItem("searchQuery",JSON.stringify(this.state.searchQuery)))}},{key:"render",value:function(){var t=this.state.movies;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(h,{onSubmit:this.onSubmit}),Object(l.jsx)(u.Suspense,{fallback:Object(l.jsx)(p.a,{}),children:t.length>0&&Object(l.jsx)(v,{movies:t})})]})}}]),r}(u.Component)},61:function(t,e,r){"use strict";r.d(e,"c",(function(){return f})),r.d(e,"b",(function(){return l})),r.d(e,"a",(function(){return h}));var n=r(64),a=r.n(n),c=r(65),o=r(66),u=r.n(o),i="384eb8ab4176debc217be91023edb374",s="https://api.themoviedb.org/3",f=function(){var t=Object(c.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("".concat(s,"/trending/all/day?api_key=").concat(i));case 2:return e=t.sent,t.abrupt("return",e.data.results);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(c.a)(a.a.mark((function t(e){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("".concat(s,"/search/movie?api_key=").concat(i,"&query=").concat(e));case 2:return r=t.sent,t.abrupt("return",r.data.results);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(c.a)(a.a.mark((function t(e){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("".concat(s,"/movie/").concat(e,"?api_key=").concat(i,"&append_to_response=credits,reviews"));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},95:function(t,e,r){t.exports={SearchBar:"SearchBar_SearchBar__3ln-X",SearchForm:"SearchBar_SearchForm__2GLA0",SearchForm__btn:"SearchBar_SearchForm__btn__3r5zG"}},96:function(t,e,r){"use strict";var n=r(97),a=r(16);function c(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function o(t){return Array.isArray(t)?t.sort():"object"===typeof t?o(Object.keys(t)).sort((function(t,e){return Number(t)-Number(e)})).map((function(e){return t[e]})):t}e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t,e){var r=function(t){var e;switch(t.arrayFormat){case"index":return function(t,r,n){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return function(t,r,n){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};default:return function(t,e,r){void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e=a({arrayFormat:"none"},e)),n=Object.create(null);return"string"!==typeof t?n:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach((function(t){var e=t.replace(/\+/g," ").split("="),a=e.shift(),c=e.length>0?e.join("="):void 0;c=void 0===c?null:decodeURIComponent(c),r(decodeURIComponent(a),c,n)})),Object.keys(n).sort().reduce((function(t,e){var r=n[e];return Boolean(r)&&"object"===typeof r&&!Array.isArray(r)?t[e]=o(r):t[e]=r,t}),Object.create(null))):n},e.stringify=function(t,e){var r=function(t){switch(t.arrayFormat){case"index":return function(e,r,n){return null===r?[c(e,t),"[",n,"]"].join(""):[c(e,t),"[",c(n,t),"]=",c(r,t)].join("")};case"bracket":return function(e,r){return null===r?c(e,t):[c(e,t),"[]=",c(r,t)].join("")};default:return function(e,r){return null===r?c(e,t):[c(e,t),"=",c(r,t)].join("")}}}(e=a({encode:!0,strict:!0,arrayFormat:"none"},e));return t?Object.keys(t).sort().map((function(n){var a=t[n];if(void 0===a)return"";if(null===a)return c(n,e);if(Array.isArray(a)){var o=[];return a.slice().forEach((function(t){void 0!==t&&o.push(r(n,t,o.length))})),o.join("&")}return c(n,e)+"="+c(a,e)})).filter((function(t){return t.length>0})).join("&"):""}},97:function(t,e,r){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}}}]);
//# sourceMappingURL=movies-page.263a9157.chunk.js.map
(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[5],{102:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return v}));var r=n(12),a=n(13),c=n(15),u=n(14),s=n(0),o=n(61),i=n(95),h=n.n(i),p=n(1),l=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return(t=e.call.apply(e,[this].concat(c))).state={value:""},t.onInputChange=function(e){t.setState({value:e.currentTarget.value})},t.onHandleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.value),t.resetInput()},t.resetInput=function(){t.setState({value:""})},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this.state.value;return Object(p.jsx)("div",{className:h.a.SearchBar,children:Object(p.jsxs)("form",{className:h.a.SearchForm,onSubmit:this.onHandleSubmit,children:[Object(p.jsx)("input",{type:"text",value:t,autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:this.onInputChange}),Object(p.jsx)("button",{type:"submit",className:h.a.SearchForm__btn,children:"Search"})]})})}}]),n}(s.Component),b=n(20),f=Object(s.lazy)((function(){return n.e(4).then(n.bind(null,75))})),v=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return(t=e.call.apply(e,[this].concat(c))).state={movies:[],searchQuery:null},t.fetchMovies=function(){var e=t.state.searchQuery;Object(o.b)(e).then((function(e){return t.setState({movies:e})})).catch((function(t){return console.log(t)}))},t.onSubmit=function(e){t.setState({searchQuery:e})},t}return Object(a.a)(n,[{key:"componentDidUpdate",value:function(t,e){var n=this.state.searchQuery;e.searchQuery!==n&&(this.props.history.push({search:"query=".concat(n)}),this.fetchMovies())}},{key:"render",value:function(){var t=this.state.movies;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l,{onSubmit:this.onSubmit}),Object(p.jsx)(s.Suspense,{fallback:Object(p.jsx)(b.a,{}),children:t.length>0&&Object(p.jsx)(f,{movies:t})})]})}}]),n}(s.Component)},61:function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return l}));var r=n(64),a=n.n(r),c=n(65),u=n(66),s=n.n(u),o="384eb8ab4176debc217be91023edb374",i="https://api.themoviedb.org/3",h=function(){var t=Object(c.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("".concat(i,"/trending/all/day?api_key=").concat(o));case 2:return e=t.sent,t.abrupt("return",e.data.results);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("".concat(i,"/search/movie?api_key=").concat(o,"&query=").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.results);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("".concat(i,"/movie/").concat(e,"?api_key=").concat(o,"&append_to_response=credits,reviews"));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},95:function(t,e,n){t.exports={SearchBar:"SearchBar_SearchBar__3ln-X",SearchForm:"SearchBar_SearchForm__2GLA0",SearchForm__btn:"SearchBar_SearchForm__btn__3r5zG"}}}]);
//# sourceMappingURL=movies-page.18604fee.chunk.js.map